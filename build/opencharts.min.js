var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("utils",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.pie=0]="pie"}(c=b.Types||(b.Types={}));var d;!function(a){a[a.top=0]="top",a[a.middle=1]="middle",a[a.bottom=2]="bottom"}(d=b.VAlign||(b.VAlign={}));var e;!function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"}(e=b.Align||(b.Align={}));var f;!function(a){a[a["#98abc5"]=0]="#98abc5",a[a["#8a89a6"]=1]="#8a89a6",a[a["#7b6888"]=2]="#7b6888",a[a["#6b486b"]=3]="#6b486b",a[a["#a05d56"]=4]="#a05d56",a[a["#d0743c"]=5]="#d0743c",a[a["#ff8c00"]=6]="#ff8c00"}(f=b.Colors||(b.Colors={}))}),define("abstract/chart",["require","exports","d3"],function(a,b,c){"use strict";var d=function(){function a(a){this.width=400,this.height=400,this.margin={top:0,right:0,bottom:0,left:0},this.legend={shapeSize:14},this.selector=a.replace("#",""),this.colors=c.schemeCategory20c}return a.prototype.setSettings=function(a){this.settings=a},a.prototype.createSVG=function(){var a=this.width,b=this.height;return c.select("#"+this.selector).append("svg").attr("width",a).attr("height",b).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+a+" "+b).classed("svg-content-responsive",!0)},a.prototype.getCanvasWidth=function(){var a=this.width,b=this.margin;return a-(b.left+b.right)},a.prototype.getCanvasHeight=function(){var a=this.height,b=this.margin;return a-(b.top+b.bottom)},a}();b.Chart=d}),define("abstract/regularChart",["require","exports","abstract/chart"],function(a,b,c){"use strict";var d=function(a){function b(){return a.apply(this,arguments)||this}return __extends(b,a),b.prototype.getColor=function(a){return this.settings.data[a].color||this.colors[a]},b}(c.Chart);b.RegularChart=d}),define("abstract/roundChart",["require","exports","abstract/chart"],function(a,b,c){"use strict";var d=function(a){function b(){return a.apply(this,arguments)||this}return __extends(b,a),b.prototype.createSVGLegends=function(a){var b=this,c=[],d=(this.width,this.margin),e=this.getLegendShapeSize(),f=a.selectAll(".legend").data(this.settings).enter().append("g").attr("class","legend");f.append("text").text(function(a){return a.label}).attr("x",function(a,d){var e=this.getComputedTextLength(),f=this.clientHeight;return b.getLegendX(c,d,e,f)}).attr("y",function(a,d){return b.getLegendY(c,d)});var g=e/2;return f.append("circle").attr("r",g).attr("fill",function(a,c){return b.getColor(c)}).attr("cx",function(a,b){return c[b].left+g}).attr("cy",function(a,b){return-1*(d.top+c[b].height/2)+c[b].top+g/2}),f.attr("transform",function(a,b){var e=d.left,f=d.top+c[b].height;return"translate("+e+","+f+")"}),c},b.prototype.getLegendX=function(a,b,c,d){var e=(this.width,this.getCanvasWidth()),f=this.getLegendShapeSize();if(a[b]={},a[b].height=d,a[b-1]){var g=a[b-1].left+a[b-1].width+2*f;g+c<=e?(a[b].left=g,a[b].top=a[b-1].top||0):(a[b].left=0,a[b].top=a[b-1].top+d),a[b].width=c+f}else a[b].top=0,a[b].left=0,a[b].width=c+f;return a[b].left+1.5*f},b.prototype.getLegendY=function(a,b){return a.height=a[b].top+a[b].height,a[b].top},b.prototype.getLegendShapeSize=function(){return this.legend.shapeSize},b.prototype.getColor=function(a){return this.settings[a].color||this.colors[a]},b}(c.Chart);b.RoundChart=d}),define("interfaces/IData",["require","exports"],function(a,b){"use strict"}),define("interfaces/ILabel",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.number=0]="number",a[a.time=1]="time",a[a.string=2]="string"}(c=b.IType||(b.IType={}))}),define("bar",["require","exports","abstract/regularChart","d3","interfaces/ILabel"],function(a,b,c,d,e){"use strict";var f=function(a){function b(b){return a.call(this,b)||this}return __extends(b,a),b.prototype.create=function(){var a=this,b=a.settings,c=b.data[0],f=b.axis,g=a.getCanvasWidth(),h=a.getCanvasHeight(),i=c.values,j=i.length,k={top:1,right:0,bottom:18,left:22},l=g-(k.left+k.right),m=h-(k.top+k.bottom),n=2,o=l/j-n;a.selector+"-chart";a.svg=a.createSVG();var p=a.getXAxis(e.IType.time,l),q=d.scaleLinear().domain([d.max(i,function(a){return a.value}),d.min(i,function(a){return a.value})]).range([0,m]);this.svg.selectAll("rect").data(i).enter().append("rect").attr("fill",function(b,c){return a.getColor(0)}).attr("x",function(a,b){return n+b*(o+n)+k.left}).attr("y",function(a){return m+k.top-q(a.value)}).attr("width",o).attr("height",function(a){return q(a.value)}),this.svg.append("g").attr("class","axis").attr("transform","translate("+k.left+","+(m+k.top)+")").call(d.axisBottom(p).ticks(f.x.ticks).tickFormat(d.timeFormat("%d/%m"))),this.svg.append("g").attr("class","axis").attr("transform","translate("+k.left+", "+k.top+")").call(d.axisLeft(q).ticks(10))},b.prototype.getXAxis=function(a,b){var c,f=this.settings.data[0].values;return c=a===e.IType.number?d.scaleOrdinal().range([d.max(f,function(a){return a.label}),d.min(f,function(a){return a.label})]):a===e.IType.time?d.scaleTime().domain([new Date(1e3*f[0].label),d.timeDay.offset(new Date(1e3*f[f.length-1].label),1)]).range([0,b]):d.scaleLinear()},b}(c.RegularChart);b.Bar=f}),define("pie",["require","exports","abstract/roundChart","d3"],function(a,b,c,d){"use strict";var e=function(a){function b(){var b=a.apply(this,arguments)||this;return b.update=function(){function a(a){var c=d.interpolate(this._current,a);return this._current=c(0),function(a){return b.arc(c(a))}}var b=this,c=b.settings;b.svg.selectAll(".arc .inner-arc").data(b.pie(c)).transition().duration(1e3).attrTween("d",a),b.svg.selectAll(".arc .outer-arc").data(b.pie(c)).attr("d",function(a){return b.outArc(a)})},b}return __extends(b,a),b.prototype.create=function(){var a=this,b=a.settings,c=a.getCanvasWidth(),e=a.getCanvasHeight(),f=a.selector+"-chart",g=function(){var a=d.select(this),b=a.attr("index"),c=a.attr("color"),e=".pie-outer-"+f+"-arc-index-"+b;d.selectAll(e).style("fill",c).classed("animate",!0)},h=function(){var a=d.select(this),b=a.attr("index"),c=".pie-outer-"+f+"-arc-index-"+b,e=d.selectAll(c);e.style("fill","#ffffff").classed("animate",!1)};a.svg=a.createSVG();var i=a.createSVGLegends(a.svg);a.pie=d.pie().value(function(a){return a.value});var j=i.height+10;e-=j;var k=Math.min(c,e)/2;a.arc=d.arc().outerRadius(k-10).innerRadius(0),a.outArc=d.arc().innerRadius(k).outerRadius(k-6);var l=a.svg.selectAll(".arc").data(a.pie(b)).enter().append("g").classed("arc",!0).attr("transform","translate("+c/2+","+(k+j)+")").attr("index",function(a,b){return b}).attr("color",function(b,c){return a.getColor(c)});l.append("path").attr("class",function(a,b){return"inner-arc pie-"+f+"-arc-index-"+b}).attr("fill",function(b,c){return a.getColor(c)}).attr("d",function(b){return a.arc(b)}).each(function(a){this._current=a}),l.append("path").attr("class",function(a,b){return"outer-arc pie-outer-arc pie-outer-"+f+"-arc-index-"+b}).attr("fill","#ffffff").attr("d",function(b){return a.outArc(b)}).each(function(a){this._current=a}),l.on("mouseover",g).on("mouseout",h)},b}(c.RoundChart);b.Pie=e}),define("opencharts",["require","exports","bar","pie"],function(a,b,c,d){"use strict";function e(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}e(c),e(d)});