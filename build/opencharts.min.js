var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};define("utils",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.pie=0]="pie"}(c=b.Types||(b.Types={}));var d;!function(a){a[a.top=0]="top",a[a.middle=1]="middle",a[a.bottom=2]="bottom"}(d=b.VAlign||(b.VAlign={}));var e;!function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"}(e=b.Align||(b.Align={}));var f;!function(a){a[a["#98abc5"]=0]="#98abc5",a[a["#8a89a6"]=1]="#8a89a6",a[a["#7b6888"]=2]="#7b6888",a[a["#6b486b"]=3]="#6b486b",a[a["#a05d56"]=4]="#a05d56",a[a["#d0743c"]=5]="#d0743c",a[a["#ff8c00"]=6]="#ff8c00"}(f=b.Colors||(b.Colors={}))}),define("abstract/chart",["require","exports","d3"],function(a,b,c){"use strict";var d=function(){function a(a){this.width=400,this.height=200,this.margin={top:0,right:0,bottom:0,left:0},this.legend={shapeSize:14},this.selector=a.replace("#",""),this.colors=c.schemeCategory20c}return a.prototype.setSettings=function(a){void 0!==a?(this.settings=a,a.width&&(this.width=a.width),a.height&&(this.height=a.height)):console.error("Opencharts error: no data provided")},a.prototype.createSVG=function(){var a=this.width,b=this.height;return c.select("#"+this.selector).append("svg").attr("width",a).attr("height",b).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+a+" "+b).classed("svg-content-responsive",!0)},a.prototype.getCanvasWidth=function(){var a=this.width,b=this.margin;return a-(b.left+b.right)},a.prototype.getCanvasHeight=function(){var a=this.height,b=this.margin;return a-(b.top+b.bottom)},a.prototype.getColor=function(a){return this.settings.data[a].color||this.colors[a]},a}();b.Chart=d}),define("abstract/regularChart",["require","exports","abstract/chart"],function(a,b,c){"use strict";var d=function(a){function b(){return a.apply(this,arguments)||this}return __extends(b,a),b}(c.Chart);b.RegularChart=d}),define("abstract/roundChart",["require","exports","abstract/chart"],function(a,b,c){"use strict";var d=function(a){function b(){var b=a.apply(this,arguments)||this;return b.height=400,b}return __extends(b,a),b.prototype.createSVGLegends=function(a){var b=this,c=[],d=this.settings.data,e=(this.width,this.margin),f=this.getLegendShapeSize(),g=a.selectAll(".legend").data(d).enter().append("g").attr("class","legend");g.append("text").text(function(a){return a.label}).attr("x",function(a,d){var e=this.getComputedTextLength(),f=this.clientHeight;return b.getLegendX(c,d,e,f)}).attr("y",function(a,d){return b.getLegendY(c,d)});var h=f/2;return g.append("circle").attr("r",h).attr("fill",function(a,c){return b.getColor(c)}).attr("cx",function(a,b){return c[b].left+h}).attr("cy",function(a,b){return-1*(e.top+c[b].height/2)+c[b].top+h/2}),g.attr("transform",function(a,b){var d=e.left,f=e.top+c[b].height;return"translate("+d+","+f+")"}),c},b.prototype.getLegendX=function(a,b,c,d){var e=(this.width,this.getCanvasWidth()),f=this.getLegendShapeSize();if(a[b]={},a[b].height=d,a[b-1]){var g=a[b-1].left+a[b-1].width+2*f;g+c<=e?(a[b].left=g,a[b].top=a[b-1].top||0):(a[b].left=0,a[b].top=a[b-1].top+d),a[b].width=c+f}else a[b].top=0,a[b].left=0,a[b].width=c+f;return a[b].left+1.5*f},b.prototype.getLegendY=function(a,b){return a.height=a[b].top+a[b].height,a[b].top},b.prototype.getLegendShapeSize=function(){return this.legend.shapeSize},b}(c.Chart);b.RoundChart=d}),define("interfaces/IData",["require","exports"],function(a,b){"use strict"}),define("interfaces/IAxis",["require","exports"],function(a,b){"use strict";var c;!function(a){a[a.time=0]="time",a[a.string=1]="string"}(c=b.X||(b.X={}))}),define("bar",["require","exports","abstract/regularChart","d3","interfaces/IAxis"],function(a,b,c,d,e){"use strict";var f=function(a){function b(b){var c=a.call(this,b)||this;return c.margin={top:1,right:0,bottom:18,left:22},c}return __extends(b,a),b.prototype.fillDefaults=function(){var a=this;void 0===a.settings.axis&&(a.settings.axis={}),void 0===a.settings.axis.x&&(a.settings.axis.x={}),void 0===a.settings.axis.x.ticks&&(a.settings.axis.x.ticks=10),void 0===a.settings.axis.x.type&&(a.settings.axis.x.type=e.X.string),"string"===a.settings.axis.x.type&&(a.settings.axis.x.type=e.X.string),"time"===a.settings.axis.x.type&&(a.settings.axis.x.type=e.X.time,void 0===a.settings.axis.x.format&&(a.settings.axis.x.format="%m/%d/%y"))},b.prototype.create=function(){var a=this;this.fillDefaults();var b=a.settings,c=b.data[0],d=b.axis,e=a.getCanvasWidth(),f=a.getCanvasHeight(),g=c.values,h=g.length,i=this.margin,j=e-(i.left+i.right),k=f-(i.top+i.bottom),l=2,m=j/h-l;a.selector+"-chart";a.svg=a.createSVG();var n=a.getXScale(d.x.type,j),o=a.getYScale(k);this.svg.selectAll("rect").data(g).enter().append("rect").attr("fill",function(b,c){return a.getColor(0)}).attr("x",function(a,b){return l+b*(m+l)+i.left}).attr("y",function(a){return k+i.top-o(a.value)}).attr("width",m).attr("height",function(a){return o(a.value)}),this.createXLegends(n,f),this.createYLegends(o)},b.prototype.getXScale=function(a,b){var c,f=this.settings.data[0].values,g=[];return a===e.X.time?c=d.scaleTime().domain([new Date(1e3*f[0].label),d.timeDay.offset(new Date(1e3*f[f.length-1].label),1)]).range([0,b]):(f.forEach(function(a){g.push(a.label)}),c=d.scaleBand().domain(g).rangeRound([0,b])),c},b.prototype.getYScale=function(a){var b,c=this.settings.data[0].values;return b=d.scaleLinear().domain([d.max(c,function(a){return a.value}),d.min(c,function(a){return a.value})]).range([0,a])},b.prototype.createXLegends=function(a,b){var c=this,f=c.settings.axis,g=c.margin;f.x.type===e.X.time?this.svg.append("g").attr("class","axis").attr("transform","translate("+g.left+","+(b+g.top)+")").call(d.axisBottom(a).ticks(f.x.ticks).tickFormat(d.timeFormat(f.x.format))):this.svg.append("g").attr("class","axis").attr("transform","translate("+g.left+","+(b+g.top)+")").call(d.axisBottom(a).ticks(f.x.ticks))},b.prototype.createYLegends=function(a){var b=this,c=b.margin;this.svg.append("g").attr("class","axis").attr("transform","translate("+c.left+", "+c.top+")").call(d.axisLeft(a).ticks(10))},b}(c.RegularChart);b.Bar=f}),define("pie",["require","exports","abstract/roundChart","d3"],function(a,b,c,d){"use strict";var e=function(a){function b(){var b=a.apply(this,arguments)||this;return b.update=function(){function a(a){var c=d.interpolate(this._current,a);return this._current=c(0),function(a){return b.arc(c(a))}}var b=this,c=b.settings.data;b.svg.selectAll(".arc .inner-arc").data(b.pie(c)).transition().duration(1e3).attrTween("d",a),b.svg.selectAll(".arc .outer-arc").data(b.pie(c)).attr("d",function(a){return b.outArc(a)})},b}return __extends(b,a),b.prototype.create=function(){var a=this,b=a.settings.data,c=a.getCanvasWidth(),e=a.getCanvasHeight(),f=a.selector+"-chart",g=function(){var a=d.select(this),b=a.attr("index"),c=a.attr("color"),e=".pie-outer-"+f+"-arc-index-"+b;d.selectAll(e).style("fill",c).classed("animate",!0)},h=function(){var a=d.select(this),b=a.attr("index"),c=".pie-outer-"+f+"-arc-index-"+b,e=d.selectAll(c);e.style("fill","#ffffff").classed("animate",!1)};a.svg=a.createSVG();var i=a.createSVGLegends(a.svg);a.pie=d.pie().value(function(a){return a.value});var j=i.height+10;e-=j;var k=Math.min(c,e)/2;a.arc=d.arc().outerRadius(k-10).innerRadius(0),a.outArc=d.arc().innerRadius(k).outerRadius(k-6);var l=a.svg.selectAll(".arc").data(a.pie(b)).enter().append("g").classed("arc",!0).attr("transform","translate("+c/2+","+(k+j)+")").attr("index",function(a,b){return b}).attr("color",function(b,c){return a.getColor(c)});l.append("path").attr("class",function(a,b){return"inner-arc pie-"+f+"-arc-index-"+b}).attr("fill",function(b,c){return a.getColor(c)}).attr("d",function(b){return a.arc(b)}).each(function(a){this._current=a}),l.append("path").attr("class",function(a,b){return"outer-arc pie-outer-arc pie-outer-"+f+"-arc-index-"+b}).attr("fill","#ffffff").attr("d",function(b){return a.outArc(b)}).each(function(a){this._current=a}),l.on("mouseover",g).on("mouseout",h)},b}(c.RoundChart);b.Pie=e}),define("opencharts",["require","exports","bar","pie"],function(a,b,c,d){"use strict";function e(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}e(c),e(d)});