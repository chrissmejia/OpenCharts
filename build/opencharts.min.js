var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};return function(b,c){function d(){this.constructor=b}a(b,c),b.prototype=null===c?Object.create(c):(d.prototype=c.prototype,new d)}}();define("utils",["require","exports"],function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});!function(a){a[a.pie=0]="pie"}(b.Types||(b.Types={}));!function(a){a[a.top=0]="top",a[a.middle=1]="middle",a[a.bottom=2]="bottom"}(b.VAlign||(b.VAlign={}));!function(a){a[a.left=0]="left",a[a.center=1]="center",a[a.right=2]="right"}(b.Align||(b.Align={}));!function(a){a[a["#98abc5"]=0]="#98abc5",a[a["#8a89a6"]=1]="#8a89a6",a[a["#7b6888"]=2]="#7b6888",a[a["#6b486b"]=3]="#6b486b",a[a["#a05d56"]=4]="#a05d56",a[a["#d0743c"]=5]="#d0743c",a[a["#ff8c00"]=6]="#ff8c00"}(b.Colors||(b.Colors={}))}),define("abstract/chart",["require","exports","d3"],function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(){function a(a){this.width=400,this.height=200,this.margin={top:0,right:0,bottom:0,left:0},this.legend={shapeSize:14},this.selector=a.replace("#",""),this.colors=c.schemeCategory20c}return a.prototype.setSettings=function(a){void 0!==a?(this.settings=a,a.width&&(this.width=a.width),a.height&&(this.height=a.height)):console.error("Opencharts error: no data provided")},a.prototype.createSVG=function(){var a=this.width,b=this.height;return c.select("#"+this.selector).append("svg").attr("width",a).attr("height",b).attr("preserveAspectRatio","xMinYMin meet").attr("viewBox","0 0 "+a+" "+b).classed("openchart",!0).classed("svg-content-responsive",!0)},a.prototype.getCanvasWidth=function(){var a=this.width,b=this.margin;return a-(b.left+b.right)},a.prototype.getCanvasHeight=function(){var a=this.height,b=this.margin;return a-(b.top+b.bottom)},a.prototype.getColor=function(a){return this.settings.data[a].color||this.colors[a]},a}();b.Chart=d}),define("interfaces/IAxis",["require","exports"],function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0});!function(a){a[a.time=0]="time",a[a.string=1]="string"}(b.X||(b.X={}))}),define("interfaces/IData",["require","exports"],function(a,b){"use strict";Object.defineProperty(b,"__esModule",{value:!0})}),define("abstract/regularChart",["require","exports","d3","interfaces/IAxis","abstract/chart"],function(a,b,c,d,e){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=function(a){function b(){return null!==a&&a.apply(this,arguments)||this}return __extends(b,a),b.prototype.fillDefaults=function(){var a=this;void 0===a.settings.axis&&(a.settings.axis={}),void 0===a.settings.axis.x&&(a.settings.axis.x={}),void 0===a.settings.axis.x.ticks&&(a.settings.axis.x.ticks=10),void 0===a.settings.axis.x.type&&(a.settings.axis.x.type=d.X.string),"string"===a.settings.axis.x.type&&(a.settings.axis.x.type=d.X.string),"time"===a.settings.axis.x.type&&(a.settings.axis.x.type=d.X.time,void 0===a.settings.axis.x.format&&(a.settings.axis.x.format="%m/%d/%y"))},b.prototype.getXScale=function(a,b){var e,f=this.settings.data[0].values,g=[];return a===d.X.time?e=c.scaleTime().domain([new Date(1e3*f[0].label),c.timeDay.offset(new Date(1e3*f[f.length-1].label),1)]).range([0,b]):(f.forEach(function(a){g.push(a.label)}),e=c.scaleBand().domain(g).rangeRound([0,b])),e},b.prototype.getYScale=function(a){var b=this.settings.data[0].values;return c.scaleLinear().domain([c.max(b,function(a){return a.value}),c.min(b,function(a){return a.value})]).range([0,a])},b}(e.Chart);b.RegularChart=f}),define("abstract/roundChart",["require","exports","abstract/chart"],function(a,b,c){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=function(a){function b(){var b=null!==a&&a.apply(this,arguments)||this;return b.height=400,b}return __extends(b,a),b.prototype.createSVGLegends=function(a){var b=this,c=[],d=this.settings.data,e=(this.width,this.margin),f=this.getLegendShapeSize(),g=a.selectAll(".legend").data(d).enter().append("g").attr("class","legend");g.append("text").text(function(a){return a.label}).attr("x",function(a,d){var e=this.getBoundingClientRect();return console.log(e.height),b.getLegendX(c,d,e.width,e.height)}).attr("y",function(a,d){return b.getLegendY(c,d)});var h=f/2;return g.append("circle").attr("r",h).attr("fill",function(a,c){return b.getColor(c)}).attr("cx",function(a,b){return c[b].left+h}).attr("cy",function(a,b){return-1*(e.top+c[b].height/2)+c[b].top+h/2}),g.attr("transform",function(a,b){return"translate("+e.left+","+(e.top+c[b].height)+")"}),c},b.prototype.getLegendX=function(a,b,c,d){var e=(this.width,this.getCanvasWidth()),f=this.getLegendShapeSize();if(a[b]={},a[b].height=d,a[b-1]){var g=a[b-1].left+a[b-1].width+2*f;g+c<=e?(a[b].left=g,a[b].top=a[b-1].top||0):(a[b].left=0,a[b].top=a[b-1].top+d),a[b].width=c+f}else a[b].top=0,a[b].left=0,a[b].width=c+f;return a[b].left+1.5*f},b.prototype.getLegendY=function(a,b){return a.height=a[b].top+a[b].height,a[b].top},b.prototype.getLegendShapeSize=function(){return this.legend.shapeSize},b}(c.Chart);b.RoundChart=d}),define("bar",["require","exports","abstract/regularChart","d3","interfaces/IAxis"],function(a,b,c,d,e){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var f=function(a){function b(b){var c=a.call(this,b)||this;return c.update=function(){var a=this;this.fillDefaults();var b=a.settings,c=b.data[0],e=b.axis,f=a.getCanvasWidth(),g=a.getCanvasHeight(),h=c.values,i=h.length,j=this.margin,k=f-(j.left+j.right),l=g-(j.top+j.bottom),m=k/i-2,n=(a.getXScale(e.x.type,k),a.getYScale(l));this.svg.selectAll("rect").data(h).transition().duration(1e3).ease(d.easeLinear).delay(0).attr("fill",function(b,c){return a.getColor(0)}).attr("x",function(a,b){return 2+b*(m+2)+j.left}).attr("y",function(a){return l+j.top-n(a.value)}).attr("width",m).attr("height",function(a){return n(a.value)||0})},c.margin={top:1,right:0,bottom:18,left:22},c}return __extends(b,a),b.prototype.create=function(){var a=this;this.fillDefaults();var b=a.settings,c=b.data[0],d=b.axis,e=a.getCanvasWidth(),f=a.getCanvasHeight(),g=c.values,h=g.length,i=this.margin,j=e-(i.left+i.right),k=f-(i.top+i.bottom),l=j/h-2;a.selector;a.svg=a.createSVG();var m=a.getXScale(d.x.type,j),n=a.getYScale(k);this.svg.selectAll("rect").data(g).enter().append("rect").attr("class","bar").attr("fill",function(b,c){return a.getColor(0)}).attr("x",function(a,b){return 2+b*(l+2)+i.left}).attr("y",function(a){return k+i.top-n(a.value)}).attr("width",l).attr("height",function(a){return n(a.value)||0}),this.createXLegends(m,f),this.createYLegends(n)},b.prototype.createXLegends=function(a,b){var c=this,f=c.settings.axis,g=c.margin;f.x.type===e.X.time?this.svg.append("g").attr("class","x axis").attr("transform","translate("+g.left+","+(b+g.top)+")").call(d.axisBottom(a).ticks(f.x.ticks).tickFormat(d.timeFormat(f.x.format))):this.svg.append("g").attr("class","x axis").attr("transform","translate("+g.left+","+(b+g.top)+")").call(d.axisBottom(a).ticks(f.x.ticks))},b.prototype.createYLegends=function(a){var b=this,c=b.margin;this.svg.append("g").attr("class","y axis").attr("transform","translate("+c.left+", "+c.top+")").call(d.axisLeft(a).ticks(10))},b}(c.RegularChart);b.Bar=f}),define("line",["require","exports","d3","abstract/regularChart"],function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=function(a){function b(b){var c=a.call(this,b)||this;return c.margin={top:8,right:0,bottom:18,left:42},c.svg=c.createSVG(),c}return __extends(b,a),b.prototype.create=function(){var a=this,b=a.selector+"-chart",d=a.settings,e=d.axis,f=this.margin,g=a.getCanvasWidth(),h=a.getCanvasHeight(),i=g-(f.left+f.right),j=h-(f.top+f.bottom),k=d.data[0],l=k.values,m=l.length,n=i/m;this.fillDefaults(),a.svg=a.createSVG();var o=a.getXScale(e.x.type,i),p=a.getYScale(j),q=c.line().x(function(a){return o(a.label)+n/2}).y(function(a){return p(a.value)+f.top}).curve(c.curveMonotoneX),r=function(){var a=c.select(this),d=a.attr("index"),e=a.attr("color"),f=".pie-outer-"+b+"-arc-index-"+d;c.selectAll(f).style("fill",e).classed("animate",!0)},s=function(){var a=c.select(this),d=a.attr("index"),e=".pie-outer-"+b+"-arc-index-"+d;c.selectAll(e).style("fill","#ffffff").classed("animate",!1)};a.svg.append("g").attr("class","x axis").attr("transform","translate("+f.left+","+(h+f.top)+")").call(c.axisBottom(o)),a.svg.append("g").attr("class","y axis").attr("transform","translate("+f.left+", "+f.top+")").call(c.axisLeft(p)),a.svg.append("path").datum(l).attr("transform","translate("+f.left+", "+f.top+")").attr("class","line").attr("d",q),a.svg.selectAll(".dot").data(l).enter().append("circle").attr("cx",function(a){return o(a.label)+n/2}).attr("cy",function(a){return p(a.value)+f.top}).attr("transform","translate("+f.left+", "+f.top+")").attr("stroke",function(b,c){return a.getColor(0)}).attr("fill","#fff").attr("stroke-width","2").attr("r",12),a.svg.selectAll(".dotSelected").data(l).enter().append("circle").attr("cx",function(a){return o(a.label)+n/2}).attr("cy",function(a){return p(a.value)+f.top}).attr("transform","translate("+f.left+", "+f.top+")").attr("fill",function(b,c){return a.getColor(0)}).attr("stroke","#fff").attr("stroke-width","2").attr("r",6).on("mouseover",r).on("mouseout",s)},b}(d.RegularChart);b.Line=e}),define("pie",["require","exports","d3","abstract/roundChart"],function(a,b,c,d){"use strict";Object.defineProperty(b,"__esModule",{value:!0});var e=function(a){function b(b){var d=a.call(this,b)||this;return d.update=function(){function a(a){var d=c.interpolate(this.current,a);return this.current=d(0),function(a){return b.arc(d(a))}}var b=this,d=b.settings.data;b.svg.selectAll(".arc .inner-arc").data(b.pie(d)).transition().duration(1e3).ease(c.easeLinear).delay(0).attrTween("d",a),b.svg.selectAll(".arc .outer-arc").data(b.pie(d)).attr("d",function(a){return b.outArc(a)})},d.svg=d.createSVG(),d}return __extends(b,a),b.prototype.create=function(){var a=this,b=a.selector+"-chart",d=a.getCanvasWidth(),e=a.getCanvasHeight(),f=a.settings.data,g=a.createSVGLegends(a.svg),h=g.height+10;e-=h;var i=Math.min(d,e)/2;a.arc=c.arc().outerRadius(i-10).innerRadius(0),a.outArc=c.arc().innerRadius(i).outerRadius(i-6),a.pie=c.pie().value(function(a){return a.value});var j=a.svg.selectAll(".arc").data(a.pie(f)).enter().append("g").classed("arc",!0).attr("transform","translate("+d/2+","+(i+h)+")").attr("index",function(a,b){return b}).attr("color",function(b,c){return a.getColor(c)});j.append("path").attr("class",function(a,c){return"inner-arc pie-"+b+"-arc-index-"+c}).attr("fill",function(b,c){return a.getColor(c)}).attr("d",function(b){return a.arc(b)}).each(function(a){this.current=a}),j.append("path").attr("class",function(a,c){return"outer-arc pie-outer-arc pie-outer-"+b+"-arc-index-"+c}).attr("fill","#ffffff").attr("d",function(b){return a.outArc(b)}).each(function(a){this.current=a});var k=function(){var a=c.select(this),d=a.attr("index"),e=a.attr("color"),f=".pie-outer-"+b+"-arc-index-"+d;c.selectAll(f).style("fill",e).classed("animate",!0)},l=function(){var a=c.select(this),d=a.attr("index"),e=".pie-outer-"+b+"-arc-index-"+d;c.selectAll(e).style("fill","#ffffff").classed("animate",!1)};j.on("mouseover",k).on("mouseout",l)},b}(d.RoundChart);b.Pie=e}),define("opencharts",["require","exports","bar","pie","line"],function(a,b,c,d,e){"use strict";function f(a){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])}Object.defineProperty(b,"__esModule",{value:!0}),f(c),f(d),f(e)});